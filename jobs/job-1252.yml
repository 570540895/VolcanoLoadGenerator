apiVersion: batch.volcano.sh/v1alpha1
kind: Job
metadata:
  name: vcjob-1252
spec:
  minAvailable: 32
  schedulerName: volcano
  plugins:
    ssh: []
    env: []
    svc: []
  maxRetry: 5
  queue: default
  ttlSecondsAfterFinished: 0
  tasks:
  - replicas: 32
    name: task-1252
    policies:
    - event: TaskCompleted
      action: CompleteJob
    template:
      metadata:
        name: pod-1252
      spec:
        containers:
        - name: ctr-1252
          image: busybox
          command:
          - /bin/sh
          - -c
          - sleep 510
          imagePullPolicy: IfNotPresent
          resources:
            requests:
              cpu: 64000m
              memory: 458752Mi
              zhejianglab.com/gpu: 8
            limits:
              cpu: 64000m
              memory: 458752Mi
              zhejianglab.com/gpu: 8
        restartPolicy: OnFailure
