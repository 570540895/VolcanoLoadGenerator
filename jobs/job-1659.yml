apiVersion: batch.volcano.sh/v1alpha1
kind: Job
metadata:
  name: vcjob-1659
spec:
  minAvailable: 2
  schedulerName: volcano
  plugins:
    ssh: []
    env: []
    svc: []
  maxRetry: 5
  queue: default
  ttlSecondsAfterFinished: 0
  tasks:
  - replicas: 2
    name: task-1659
    policies:
    - event: TaskCompleted
      action: CompleteJob
    template:
      metadata:
        name: pod-1659
      spec:
        containers:
        - name: ctr-1659
          image: busybox
          command:
          - /bin/sh
          - -c
          - sleep 20
          imagePullPolicy: IfNotPresent
          resources:
            requests:
              cpu: 64000m
              memory: 917504Mi
              zhejianglab.com/gpu: 8
            limits:
              cpu: 64000m
              memory: 917504Mi
              zhejianglab.com/gpu: 8
        restartPolicy: OnFailure
