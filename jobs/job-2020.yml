apiVersion: batch.volcano.sh/v1alpha1
kind: Job
metadata:
  name: vcjob-2020
spec:
  minAvailable: 1
  schedulerName: volcano
  plugins:
    ssh: []
    env: []
    svc: []
  maxRetry: 5
  queue: default
  ttlSecondsAfterFinished: 0
  tasks:
  - replicas: 1
    name: task-2020
    policies:
    - event: TaskCompleted
      action: CompleteJob
    template:
      metadata:
        name: pod-2020
      spec:
        containers:
        - name: ctr-2020
          image: busybox
          command:
          - /bin/sh
          - -c
          - sleep 176
          imagePullPolicy: IfNotPresent
          resources:
            requests:
              cpu: 64000m
              memory: 458752Mi
              zhejianglab.com/gpu: 8
            limits:
              cpu: 64000m
              memory: 458752Mi
              zhejianglab.com/gpu: 8
        restartPolicy: OnFailure
